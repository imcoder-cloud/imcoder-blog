webpackJsonp([23],{JEQ8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("vLgD"),s="/api/admin/banner",l={findAll:function(t){return Object(r.a)({url:""+s,params:t,method:"get"})},page:function(t){return Object(r.a)({url:s+"/page",params:t,method:"get"})},get:function(t){return Object(r.a)({url:s+"/"+t,method:"get"})},group:function(){return Object(r.a)({url:s+"/group",method:"get"})},update:function(t){return Object(r.a)({url:""+s,data:[t],method:"put"})},create:function(t){return Object(r.a)({url:s,data:[t],method:"post"})},delete:function(t){return Object(r.a)({url:s+"/"+t,method:"delete"})}},i=l,n={data:function(){return{optionsArr:["total","sizes","prev","pager","next","jumper"],fileList:[],tableData:[],groups:[],editParams:{groupId:1,sort:1},queryParams:{pageNum:1,pageSize:10},total:0}},created:function(){this.getBanners(),this.group()},computed:{editTypeChange:function(){return this.editType}},watch:{},methods:{getBanners:function(){var t=this;""==this.queryParams.name&&(this.queryParams.name=null),i.page(this.queryParams).then(function(e){t.tableData=e.data.records,t.total=e.data.total})},group:function(){var t=this;i.group().then(function(e){t.groups=e.data,0==t.groups.length&&(t.editParams.groupId=0)})},handleSizeChange:function(t){this.queryParams.pageSize=t,this.getBanners()},handleCurrentChange:function(t){this.queryParams.pageNum=t,this.getBanners()},onSuccess:function(t,e,a){e.url=t.data.url,this.fileList=a},handleRemove:function(t,e){this.fileList=e},save:function(t){var e=this,a=this.editParams.id;if(0==this.fileList.length)return this.$message.warning("请上传图片"),!1;this.editParams.img=this.fileList[0].url,a?i.update(this.editParams).then(function(t){e.$message.success("保存成功")}):i.create(this.editParams).then(function(t){e.editParams={},e.$message.success("保存成功"),e.getBanners()})},edit:function(t){this.editParams=t},del:function(t){var e=this;i.delete(t.id).then(function(t){e.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message.success("已删除"),e.getBanners()}).catch(function(){})})},reset:function(t){this.$refs.modelForm.resetFields()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"mb20",attrs:{xl:6,lg:6,md:10,sm:24,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Banner编辑")])]),t._v(" "),a("div",[a("el-form",{ref:"modelForm",staticClass:"vertical-form",attrs:{model:t.editParams,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:t.editParams.title,callback:function(e){t.$set(t.editParams,"title",e)},expression:"editParams.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分组"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.editParams.groupId,callback:function(e){t.$set(t.editParams,"groupId",e)},expression:"editParams.groupId"}},[a("el-option",{attrs:{label:"新增分组",value:0}}),t._v(" "),t._l(t.groups,function(t){return a("el-option",{key:t.groupId,attrs:{label:"分组"+t.groupId,value:t.groupId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"副标题"}},[a("el-input",{attrs:{placeholder:"副标题"},model:{value:t.editParams.alias,callback:function(e){t.$set(t.editParams,"alias",e)},expression:"editParams.alias"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"描述"},model:{value:t.editParams.description,callback:function(e){t.$set(t.editParams,"description",e)},expression:"editParams.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"顺序"}},[a("el-input",{attrs:{placeholder:"顺序"},model:{value:t.editParams.sort,callback:function(e){t.$set(t.editParams,"sort",e)},expression:"editParams.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"缩略图"}},[a("el-upload",{attrs:{action:"/api/admin/upload/image","on-remove":t.handleRemove,"on-success":t.onSuccess,"file-list":t.fileList,limit:1,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.save()}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.reset()}}},[t._v("重置")])],1)],1)],1)])],1),t._v(" "),a("el-col",{staticClass:"mb20",attrs:{xl:18,lg:18,md:14,sm:24,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("模型列表")])]),t._v(" "),a("div",[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"模型名称"}},[a("el-input",{attrs:{placeholder:"模型名称"},model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getBanners()}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{padding:"20px"}},[a("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"groupId",label:"groupId"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{height:"60px"},attrs:{src:t.row.img,fit:"scale-down"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"顺序"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"alias",label:"副标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:!1,"current-page":t.queryParams.pageNum,"page-sizes":[10,20,30,40,50],"page-size":t.queryParams.pageSize,layout:t.optionsArr.join(","),total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(n,o,!1,function(t){a("izjB")},null,null);e.default=u.exports},izjB:function(t,e){}});