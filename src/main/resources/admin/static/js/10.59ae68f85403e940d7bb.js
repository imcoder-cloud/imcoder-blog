webpackJsonp([10],{"4zgg":function(t,e,a){"use strict";var n=a("vLgD"),r="/api/admin/content",l={findAll:function(t){return Object(n.a)({url:""+r,params:t,method:"get"})},page:function(t){return Object(n.a)({url:r+"/page-plus",params:t,method:"get"})},get:function(t){return Object(n.a)({url:r+"/"+t,method:"get"})},update:function(t){return Object(n.a)({url:r+"/update",data:t,method:"put"})},create:function(t){return Object(n.a)({url:r+"/save",data:t,method:"post"})},delete:function(t){return Object(n.a)({url:r+"/"+t,method:"delete"})}};e.a=l},"8O9O":function(t,e){},S2Yg:function(t,e){},qBs3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("p/Fm"),r=a("spLH"),l=a("4zgg"),o={components:{CategoryTree:n.default,Pagination:r.a},data:function(){return{tableLoading:!1,contents:[],queryParams:{pageNum:1,pageSize:10},total:0}},created:function(){this.getContents()},methods:{getContents:function(){var t=this;""==this.queryParams.name&&(this.queryParams.name=null),this.tableLoading=!0,l.a.page(this.queryParams).then(function(e){t.tableLoading=!1,t.contents=e.data.records,t.total=e.data.total})},handleNodeClick:function(t){this.queryParams.categoryId=t.id,this.getContents()},handleSizeChange:function(t){this.queryParams.pageSize=t,this.getContents()},handleCurrentChange:function(t){this.queryParams.pageNum=t,this.getContents()},edit:function(t){this.$router.push("/content/write?contentId="+t.id)},del:function(t){var e=this;l.a.delete(t.id).then(function(t){e.$message.success("删除成功"),e.getContents()})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"mb20",attrs:{xl:5,lg:6,md:10,sm:24,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("选择栏目")])]),t._v(" "),a("category-tree",{on:{"node-click":t.handleNodeClick}})],1)],1),t._v(" "),a("el-col",{staticClass:"mb20",attrs:{xl:19,lg:18,md:14,sm:24,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("内容列表")])]),t._v(" "),a("div",[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"内容标题"}},[a("el-input",{attrs:{placeholder:"内容标题"},model:{value:t.queryParams.title,callback:function(e){t.$set(t.queryParams,"title",e)},expression:"queryParams.title"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getContents()}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{padding:"20px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{"margin-bottom":"20px"},attrs:{data:t.contents,"element-loading-background":"rgba(0, 0, 0, 0.3)","element-loading-text":"数据正在加载中","element-loading-spinner":"el-icon-loading"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{underline:!1,type:"primary"}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("已发布")]):t._e(),t._v(" "),0==e.row.status?a("el-tag",{attrs:{type:"warning"}},[t._v("草稿")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"categoryNames",label:"栏目","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"path",label:"路径"}}),t._v(" "),a("el-table-column",{attrs:{prop:"visits",label:"访问"}}),t._v(" "),a("el-table-column",{attrs:{prop:"likes",label:"喜欢"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("设置")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确定删除本条数据吗？删除后不可恢复。",cancelButtonType:"default"},on:{onConfirm:function(a){return t.del(e.row)}}},[a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),t._v(" "),a("pagination",{attrs:{pageNum:t.queryParams.pageNum,pageSize:t.queryParams.pageSize,total:t.total},on:{sizeChange:t.handleSizeChange,currentChange:t.handleCurrentChange}})],1)])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(o,s,!1,function(t){a("8O9O")},null,null);e.default=i.exports},spLH:function(t,e,a){"use strict";var n={render:function(){var t=this.$createElement;return(this._self._c||t)("el-pagination",{attrs:{background:!1,"current-page":this.pageNum,"page-sizes":[10,20,30,40,50],"page-size":this.pageSize,layout:this.optionsArr.join(","),total:this.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})},staticRenderFns:[]};var r=a("VU/8")({props:{pageSize:{default:10},pageNum:{default:1},total:{default:0}},data:function(){return{optionsArr:["total","sizes","prev","pager","next","jumper"]}},methods:{handleSizeChange:function(t){this.$emit("sizeChange",t)},handleCurrentChange:function(t){this.$emit("currentChange",t)}}},n,!1,function(t){a("S2Yg")},null,null);e.a=r.exports}});