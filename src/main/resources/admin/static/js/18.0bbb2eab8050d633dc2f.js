webpackJsonp([18],{"JDI/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Go1s"),l=a("EatH"),i=a("KoIP"),s=a("vInK"),n={components:{SelectTree:l.a},data:function(){return{categories:[],models:[],defaultCagegory:{id:0,name:"顶级栏目"},config:{value:"id",label:"name",children:"children"},editParams:{},categoryRules:r.a.categoryRules}},created:function(){this.getCategorys(),this.getModels()},computed:{editTypeChange:function(){return this.editType}},watch:{},methods:{getCategorys:function(){var e=this;i.a.tree().then(function(t){e.categories=t.data})},getModels:function(){var e=this;s.a.findAll().then(function(t){e.models=t.data})},nodeClick:function(e){this.editParams.parentId=e.id},save:function(e){var t=this;this.$refs.categoryForm.validate(function(e){if(!e)return!1;t.editParams.id?i.a.update(t.editParams).then(function(e){t.reset(),t.$message.success("保存成功")}):i.a.create(t.editParams).then(function(e){t.reset(),t.$message.success("保存成功"),t.getCategorys()})})},edit:function(e){this.editParams=e},del:function(e){var t=this;i.a.delete(e.id).then(function(e){t.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message.success("已删除"),t.getCategorys()}).catch(function(){})})},reset:function(e){this.editParams={}}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"mb20",attrs:{xl:6,lg:6,md:10,sm:24,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("栏目编辑")])]),e._v(" "),a("div",[a("el-form",{ref:"categoryForm",staticClass:"vertical-form",attrs:{model:e.editParams,"label-position":"left",rules:e.categoryRules,"label-width":"60px"}},[a("el-tabs",{attrs:{value:"basic"}},[a("el-tab-pane",{attrs:{label:"基础信息",name:"basic"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{prop:"name",placeholder:"名称"},model:{value:e.editParams.name,callback:function(t){e.$set(e.editParams,"name",t)},expression:"editParams.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父栏目"}},[e.categories.length>0?a("select-tree",{attrs:{config:e.config,options:e.categories,defaultOption:e.defaultCagegory,value:e.editParams.parentId},on:{"node-click":e.nodeClick}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"路径"}},[a("el-input",{attrs:{prop:"path",placeholder:"访问路径"},model:{value:e.editParams.path,callback:function(t){e.$set(e.editParams,"path",t)},expression:"editParams.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"列表页"}},[a("el-input",{attrs:{prop:"listPage",placeholder:"列表页"},model:{value:e.editParams.listPage,callback:function(t){e.$set(e.editParams,"listPage",t)},expression:"editParams.listPage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详情页"}},[a("el-input",{attrs:{prop:"detailPage",placeholder:"详情页"},model:{value:e.editParams.detailPage,callback:function(t){e.$set(e.editParams,"detailPage",t)},expression:"editParams.detailPage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序"}},[a("el-input",{attrs:{prop:"sort",placeholder:"顺序"},model:{value:e.editParams.sort,callback:function(t){e.$set(e.editParams,"sort",t)},expression:"editParams.sort"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"高级设置",name:"advance"}},[a("el-form-item",{attrs:{label:"副标题"}},[a("el-input",{attrs:{prop:"alias",placeholder:"副标题"},model:{value:e.editParams.alias,callback:function(t){e.$set(e.editParams,"alias",t)},expression:"editParams.alias"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{attrs:{prop:"outLink",placeholder:"外部链接"},model:{value:e.editParams.outLink,callback:function(t){e.$set(e.editParams,"outLink",t)},expression:"editParams.outLink"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标"}},[a("el-input",{attrs:{prop:"icon",placeholder:"图标"},model:{value:e.editParams.icon,callback:function(t){e.$set(e.editParams,"icon",t)},expression:"editParams.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{prop:"keywords",placeholder:"SEO关键字"},model:{value:e.editParams.keywords,callback:function(t){e.$set(e.editParams,"keywords",t)},expression:"editParams.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"SEO描述"},model:{value:e.editParams.description,callback:function(t){e.$set(e.editParams,"description",t)},expression:"editParams.description"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.save()}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1)])],1),e._v(" "),a("el-col",{staticClass:"mb20",attrs:{xl:18,lg:18,md:14,sm:24,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("栏目分类")])]),e._v(" "),a("div",[a("vxe-table",{ref:"xTree",attrs:{"tree-config":"","highlight-hover-row":"",border:!1,"edit-config":{trigger:"click",mode:"cell"},data:e.categories}},[a("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":""}}),e._v(" "),a("vxe-table-column",{attrs:{field:"id",title:"Id",width:"80"}}),e._v(" "),a("vxe-table-column",{attrs:{field:"path",title:"访问路径"}}),e._v(" "),a("vxe-table-column",{attrs:{field:"listPage",title:"列表页"}}),e._v(" "),a("vxe-table-column",{attrs:{field:"detailPage",title:"详情页"}}),e._v(" "),a("vxe-table-column",{attrs:{field:"sort",title:"顺序",width:"80","edit-render":{name:"input"}}}),e._v(" "),a("vxe-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,o,!1,function(e){a("kj8f")},null,null);t.default=c.exports},kj8f:function(e,t){},vInK:function(e,t,a){"use strict";var r=a("vLgD"),l="/api/admin/model",i={findAll:function(e){return Object(r.a)({url:""+l,params:e,method:"get"})},page:function(e){return Object(r.a)({url:l+"/page",params:e,method:"get"})},get:function(e){return Object(r.a)({url:l+"/"+e,method:"get"})},update:function(e){return Object(r.a)({url:""+l,data:[e],method:"put"})},create:function(e){return Object(r.a)({url:l,data:[e],method:"post"})},delete:function(e){return Object(r.a)({url:l+"/"+e,method:"delete"})}};t.a=i}});