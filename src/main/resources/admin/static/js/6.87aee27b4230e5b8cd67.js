webpackJsonp([6],{EatH:function(e,t,a){"use strict";var l={name:"el-tree-select",props:{config:{type:Object,default:function(){return{value:"id",label:"title",children:"children"}}},defaultOption:{type:Object,default:function(){return{value:null,label:"请选择"}}},options:{type:Array,default:function(){return[]}},value:{type:Number,default:function(){return null}},clearable:{type:Boolean,default:function(){return!1}},accordion:{type:Boolean,default:function(){return!0}},placeholder:{type:String,default:function(){return"搜索关键字"}}},data:function(){return{filterText:"",valueId:this.value,valueTitle:"",treeData:[],defaultExpandedKey:[]}},mounted:function(){var e=this;this.treeData.push(this.defaultOption),this.options.map(function(t){e.treeData.push(t)}),this.initHandle()},methods:{initHandle:function(){void 0!=this.value&&null!=this.value?(this.valueTitle=this.$refs.selectTree.getNode(this.value).data[this.config.label],this.$refs.selectTree.setCurrentKey(this.value),this.defaultExpandedKey=[this.value]):this.clearHandle()},nodeClick:function(e){this.valueTitle=e[this.config.label],this.value=e[this.config.value],this.$emit("node-click",e),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.value=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue",null)},clearSelected:function(){document.querySelectorAll(".select-tree #tree-option .el-tree-node").forEach(function(e){return e.classList.remove("is-current")})},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)}},watch:{value:function(e){this.initHandle()},filterText:function(e){this.$refs.selectTree.filter(e)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-tree"},[a("el-select",{ref:"select",attrs:{value:e.value,clearable:e.clearable},on:{clear:e.clearHandle}},[a("el-input",{staticClass:"select-input",attrs:{placeholder:e.placeholder,size:"small"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-option",{attrs:{value:e.value,label:e.valueTitle}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:e.accordion,data:e.treeData,props:e.config,"node-key":e.config.value,"default-expanded-keys":e.defaultExpandedKey,"filter-node-method":e.filterNode},on:{"node-click":e.nodeClick}})],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,i,!1,function(e){a("Qg02")},"data-v-3a77c360",null);t.a=r.exports},"JDI/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Go1s"),i=a("EatH"),r=a("KoIP"),s=a("5+41"),n={components:{SelectTree:i.a},data:function(){return{categories:[],templates:[],defaultCagegory:{id:0,name:"顶级栏目"},config:{value:"id",label:"name",children:"children"},editParams:{},categoryRules:l.a.categoryRules}},created:function(){this.getCategorys(),this.getTemplates()},computed:{editTypeChange:function(){return this.editType}},watch:{},methods:{getCategorys:function(){var e=this;r.a.tree().then(function(t){e.categories=t.data})},getTemplates:function(){var e=this;s.a.fileList().then(function(t){e.templates=t.data})},nodeClick:function(e){this.editParams.parentId=e.id},save:function(e){var t=this;return this.editParams.name?this.editParams.parentId||0==this.editParams.parentId?this.editParams.listPage?this.editParams.detailPage?void(t.editParams.id?r.a.update(t.editParams).then(function(e){t.reset(),t.$message.success("保存成功")}):r.a.create(t.editParams).then(function(e){t.reset(),t.$message.success("保存成功"),t.getCategorys()})):(this.$message.warning("请选择详情页"),!1):(this.$message.warning("请选择列表页"),!1):(this.$message.warning("请选择父栏目"),!1):(this.$message.warning("请填写名称"),!1)},edit:function(e){this.editParams=e},del:function(e){var t=this;r.a.delete(e.id).then(function(e){t.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message.success("已删除"),t.getCategorys()}).catch(function(){})})},reset:function(e){this.editParams={}}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"mb20",attrs:{xl:6,lg:6,md:10,sm:24,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("栏目编辑")])]),e._v(" "),a("div",[a("el-form",{ref:"categoryForm",staticClass:"vertical-form",attrs:{model:e.editParams,"label-position":"left",rules:e.categoryRules,"label-width":"60px"}},[a("el-tabs",{attrs:{value:"basic"}},[a("el-tab-pane",{attrs:{label:"基础信息",name:"basic"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{prop:"name",placeholder:"名称"},model:{value:e.editParams.name,callback:function(t){e.$set(e.editParams,"name",t)},expression:"editParams.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父栏目"}},[e.categories.length>0?a("select-tree",{attrs:{config:e.config,options:e.categories,defaultOption:e.defaultCagegory,value:e.editParams.parentId},on:{"node-click":e.nodeClick}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"路径"}},[a("el-input",{attrs:{placeholder:"访问路径"},model:{value:e.editParams.path,callback:function(t){e.$set(e.editParams,"path",t)},expression:"editParams.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"列表页"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editParams.listPage,callback:function(t){e.$set(e.editParams,"listPage",t)},expression:"editParams.listPage"}},e._l(e.templates,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"详情页"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editParams.detailPage,callback:function(t){e.$set(e.editParams,"detailPage",t)},expression:"editParams.detailPage"}},e._l(e.templates,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序"}},[a("el-input",{attrs:{prop:"sort",placeholder:"顺序"},model:{value:e.editParams.sort,callback:function(t){e.$set(e.editParams,"sort",t)},expression:"editParams.sort"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"高级设置",name:"advance"}},[a("el-form-item",{attrs:{label:"副标题"}},[a("el-input",{attrs:{prop:"alias",placeholder:"副标题"},model:{value:e.editParams.alias,callback:function(t){e.$set(e.editParams,"alias",t)},expression:"editParams.alias"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{attrs:{prop:"outLink",placeholder:"外部链接"},model:{value:e.editParams.outLink,callback:function(t){e.$set(e.editParams,"outLink",t)},expression:"editParams.outLink"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标"}},[a("el-input",{attrs:{prop:"icon",placeholder:"图标"},model:{value:e.editParams.icon,callback:function(t){e.$set(e.editParams,"icon",t)},expression:"editParams.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{prop:"keywords",placeholder:"SEO关键字"},model:{value:e.editParams.keywords,callback:function(t){e.$set(e.editParams,"keywords",t)},expression:"editParams.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"SEO描述"},model:{value:e.editParams.description,callback:function(t){e.$set(e.editParams,"description",t)},expression:"editParams.description"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.save()}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1)])],1),e._v(" "),a("el-col",{staticClass:"mb20",attrs:{xl:18,lg:18,md:14,sm:24,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("栏目分类")])]),e._v(" "),a("div",[a("vxe-table",{ref:"xTree",attrs:{"tree-config":"","highlight-hover-row":"",border:!1,"edit-config":{trigger:"click",mode:"cell"},data:e.categories}},[a("vxe-table-column",{attrs:{field:"name",title:"名称","tree-node":""}}),e._v(" "),a("vxe-table-column",{attrs:{field:"id",title:"Id",width:"80"}}),e._v(" "),a("vxe-table-column",{attrs:{field:"path",title:"访问路径"}}),e._v(" "),a("vxe-table-column",{attrs:{field:"listPage",title:"列表页"}}),e._v(" "),a("vxe-table-column",{attrs:{field:"detailPage",title:"详情页"}}),e._v(" "),a("vxe-table-column",{attrs:{field:"sort",title:"顺序",width:"80","edit-render":{name:"input"}}}),e._v(" "),a("vxe-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,o,!1,function(e){a("cYGY")},null,null);t.default=c.exports},Qg02:function(e,t){},cYGY:function(e,t){}});